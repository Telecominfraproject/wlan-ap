--- a/drivers/platform/ipq/bootconfig.c
+++ b/drivers/platform/ipq/bootconfig.c
@@ -593,7 +593,7 @@ static int write_to_flash (struct sbl_if
 	if (IS_ERR(mtd)) {
 		/*Flash to EMMC*/
 
-#ifdef CONFIG_EMMC
+#ifdef CONFIG_MMC
 		for (i = 0; i < MAX_MMC_DEVICE; i++) {
 
 			bdev = blkdev_get_by_dev(MKDEV(MMC_BLOCK_MAJOR,
