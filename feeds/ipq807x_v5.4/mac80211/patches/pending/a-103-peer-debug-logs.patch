From a54e43285c22bcca9e4020156ccb68d7adcfce18 Mon Sep 17 00:00:00 2001
From: Backports Generator <backports@generator.local>
Date: Thu, 4 Sep 2025 16:32:05 -0400
Subject: [PATCH] peer debug logs

Signed-off-by: Backports Generator <backports@generator.local>
---
 drivers/net/wireless/ath/ath11k/mac.c  | 4 ++++
 drivers/net/wireless/ath/ath11k/peer.c | 8 +++++++-
 2 files changed, 11 insertions(+), 1 deletion(-)

diff --git a/drivers/net/wireless/ath/ath11k/mac.c b/drivers/net/wireless/ath/ath11k/mac.c
index 10925f2..6bf9c2e 100644
--- a/drivers/net/wireless/ath/ath11k/mac.c
+++ b/drivers/net/wireless/ath/ath11k/mac.c
@@ -5750,6 +5750,8 @@ static int ath11k_mac_op_sta_state(struct ieee80211_hw *hw,
 			list_del(&peer->list);
 			kfree(peer);
 			ar->num_peers--;
+			ath11k_dbg(ar->ab, ATH11K_DBG_PEER, "%s peer deleted %pM vdev_id: %d num_peers: %d\n",
+				__func__, sta->addr, arvif->vdev_id, ar->num_peers);
 		}
 		spin_unlock_bh(&ar->ab->base_lock);
 		mutex_unlock(&ar->ab->tbl_mtx_lock);
@@ -7847,6 +7849,8 @@ err_peer_del:
 			goto err_keyid;
 
 		ar->num_peers--;
+		ath11k_dbg(ar->ab, ATH11K_DBG_PEER, "%s vif peer deleted %pM vdev_id: %d num_peers: %d\n",
+			__func__, vif->addr, arvif->vdev_id, ar->num_peers);
 	}
 
 err_vdev_del:
diff --git a/drivers/net/wireless/ath/ath11k/peer.c b/drivers/net/wireless/ath/ath11k/peer.c
index aefc6ba..72ce1ae 100644
--- a/drivers/net/wireless/ath/ath11k/peer.c
+++ b/drivers/net/wireless/ath/ath11k/peer.c
@@ -744,6 +744,8 @@ void ath11k_peer_cleanup(struct ath11k *ar, u32 vdev_id)
 		list_del(&peer->list);
 		kfree(peer);
 		ar->num_peers--;
+		ath11k_dbg(ar->ab, ATH11K_DBG_PEER, "%s peer cleanup %pM vdev_id: %d num_peers: %d\n",
+			__func__, peer->addr, vdev_id, ar->num_peers);
 	}
 
 	spin_unlock_bh(&ab->base_lock);
@@ -868,6 +870,9 @@ int ath11k_peer_delete(struct ath11k *ar, u32 vdev_id, u8 *addr)
 
 	ar->num_peers--;
 
+	ath11k_dbg(ar->ab, ATH11K_DBG_PEER, "%s peer deleted %pM vdev_id: %d num_peers: %d\n",
+			__func__, addr, vdev_id, ar->num_peers);
+
 	return 0;
 }
 
@@ -970,7 +975,8 @@ int ath11k_peer_create(struct ath11k *ar, struct ath11k_vif *arvif,
 	ar->num_peers++;
 
 	if (ath11k_mac_sta_level_info(arvif, sta)) {
-		ath11k_dbg(ar->ab, ATH11K_DBG_PEER, "peer created %pM\n", param->peer_addr);
+		ath11k_dbg(ar->ab, ATH11K_DBG_PEER, "peer created %pM vdev_id: %d num_peers: %d\n",
+			param->peer_addr, param->vdev_id, ar->num_peers);
 		peer->peer_logging_enabled = true;
 	}
 
-- 
2.50.1

